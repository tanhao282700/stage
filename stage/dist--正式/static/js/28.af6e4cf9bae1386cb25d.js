webpackJsonp([28],{"5s6Z":function(t,a){},e21K:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("GQaK"),n=s("4FCr"),o=s("pDNl"),i=s("D8a4"),r=(n.a,o.a,i.a,{name:"orderManage",components:{LoadMore:n.a,XInput:o.a,Badge:i.a},data:function(){return{isStateOpen:!1,value:"",isMoreData:!0,data:[],pulldownMsg:"下拉刷新",pullupMsg:"加载更多",alertHook:"none",params:{matchParam:"",merchantId:"",status:99,page:1,pageSize:10},hotelOrderNum:0,goodsOrderNum:0,tabIndex:1}},methods:{cancelOrder:function(t,a){var s=this;this.$http.fetchPost("/merchant/order/update/room",{operate:0,orderId:t.orderId}).then(function(t){200==t.data.code?(s.data[a].status=5,s.$vux.toast.show({text:"操作成功",position:"middle"})):s.$vux.toast.show({text:t.data.message,position:"middle",type:"warn"})}),event.stopPropagation()},changePrice:function(t){this.$router.push({name:"changePrice",query:{id:t}}),event.stopPropagation()},goDetails:function(t){this.$store.state.tabIndex=this.tabIndex,this.$router.push({name:t.path,query:{id:t.id}})},openState:function(){this.isStateOpen=!this.isStateOpen},getBack:function(){this.$router.go(-1)},chooseStatus:function(t){this.$vux.loading.show({text:"加载中..."}),this.params.status=t,this.isStateOpen=!1,this.refreshData()},refreshalert:function(){var t=this;this.alertHook="block",setTimeout(function(){t.alertHook="none"},1e3)},changeTab:function(t){this.params.matchParam="",this.$vux.loading.show({text:"加载中..."}),this.params.status=99,this.tabIndex=t,this.refreshData()},getInitHotelData:function(){var t=this;this.$http.fetchGet("/merchant/order/get/room/list",this.params).then(function(a){setTimeout(function(){t.$vux.loading.hide()},500),t.hotelOrderNum=a.data.data.orderNum,1!=t.$store.state.tabIndex&&t.$store.state.tabIndex||(t.data=a.data.data.orderList,t.data.length===t.params.pageSize?t.isMoreData=!0:(t.isMoreData=!1,t.$nextTick(function(){t.$refs.list_con.offsetHeight>t.$refs.content.offsetHeight&&(t.$refs.content.style.height=t.$refs.list_con.offsetHeight+2+"px")})),t.initScroll(),t.$store.state.tabIndex="")})},getInitGoodsData:function(){var t=this;this.$http.fetchGet("/merchant/order/get/goods/list",this.params).then(function(a){t.goodsOrderNum=a.data.data.orderNum,2==t.$store.state.tabIndex&&(t.data=a.data.data.orderList,t.data.length===t.params.pageSize?t.isMoreData=!0:(t.isMoreData=!1,t.$nextTick(function(){t.$refs.list_con.offsetHeight>t.$refs.content.offsetHeight&&(t.$refs.content.style.height=t.$refs.list_con.offsetHeight+2+"px")})),t.initScroll(),t.$store.state.tabIndex="")})},initScroll:function(){var t=this;this.$nextTick(function(){t.scroll=new e.a(t.$refs.wrapper,{probeType:1,click:!0}),t.scroll.on("scroll",function(a){a.y>30&&(t.pulldownMsg="释放立即刷新")}),t.scroll.on("touchEnd",function(a){a.y>30?t.refreshData():a.y<t.scroll.maxScrollY-30&&t.loadMoreData()})})},refreshData:function(){var t=this;this.$refs.content.style.height="auto",this.pullupMsg="加载中。。。",this.params.page=1;var a="";a=1==this.tabIndex?"/merchant/order/get/room/list":"/merchant/order/get/goods/list",this.$http.fetchGet(a,this.params).then(function(a){setTimeout(function(){t.$vux.loading.hide()},500),1==t.tabIndex?t.hotelOrderNum=a.data.data.orderNum:t.goodsOrderNum=a.data.data.orderNum,t.data=a.data.data.orderList,t.data.length===t.params.pageSize?t.isMoreData=!0:(t.isMoreData=!1,t.$nextTick(function(){t.$refs.list_con.offsetHeight>t.$refs.content.offsetHeight&&(t.$refs.content.style.height=t.$refs.list_con.offsetHeight+2+"px")})),t.pullupMsg="加载更多",t.scroll.refresh()})},loadMoreData:function(){var t=this;if(this.data.length<this.params.pageSize||this.data.length<this.params.pageSize*this.params.page)this.isMoreData=!1;else{this.params.page++;var a="";a=1==this.tabIndex?"/merchant/order/get/room/list":"/merchant/order/get/goods/list",this.$http.fetchGet(a,this.params).then(function(a){1==t.tabIndex?t.hotelOrderNum=a.data.data.orderNum:t.goodsOrderNum=a.data.data.orderNum,t.data.length===t.params.pageSize?t.isMoreData=!0:t.isMoreData=!1,a.data.data.goodsList.length>0?a.data.data.goodsList.map(function(a){t.data.push(a)}):t.isMoreData=!1,t.pulldownMsg="下拉刷新",t.scroll.refresh()})}}},created:function(){this.$vux.loading.show({text:"加载中..."}),this.params.merchantId=this.$store.state.merchantId,1==this.$route.query.status&&(this.params.status=1,this.$router.replace({})),this.getInitHotelData(),this.getInitGoodsData()}}),c={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"orderManage"},[s("div",{staticClass:"iosHeader vux-1px-b"},[s("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[s("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),s("x-input",{attrs:{placeholder:"输入订单号、客户姓名、客户手机号搜索"},model:{value:t.params.matchParam,callback:function(a){t.$set(t.params,"matchParam",a)},expression:"params.matchParam"}}),t._v(" "),s("span",{staticClass:"right headericon icon iconfont",staticStyle:{"font-size":"0.36rem"},on:{click:t.refreshData}},[t._v("")])],1),t._v(" "),s("div",{staticClass:"tabBar vux-1px-b"},[s("div",{staticClass:"bar",class:{active:1==t.tabIndex},on:{click:function(a){return t.changeTab(1)}}},[s("div",{staticClass:"barInfo"},[s("span",[t._v("驿站")]),t._v(" "),s("badge",{attrs:{text:t.hotelOrderNum}})],1)]),t._v(" "),s("div",{staticClass:"bar",class:{active:2==t.tabIndex},on:{click:function(a){return t.changeTab(2)}}},[s("div",{staticClass:"barInfo"},[s("span",[t._v("商品")]),t._v(" "),s("badge",{attrs:{text:t.goodsOrderNum}})],1)])]),t._v(" "),s("div",{staticClass:"state vux-1px-b"},[s("div",{on:{click:t.openState}},[99==t.params.status?s("span",[t._v("所有状态")]):t._e(),t._v(" "),0==t.params.status?s("span",[t._v("待支付")]):t._e(),t._v(" "),1==t.params.status&&2==t.tabIndex?s("span",[t._v("待发货")]):t._e(),t._v(" "),1==t.params.status&&1==t.tabIndex?s("span",[t._v("待确认")]):t._e(),t._v(" "),2==t.params.status?s("span",[t._v("申请退款")]):t._e(),t._v(" "),3==t.params.status?s("span",[t._v("退款失败")]):t._e(),t._v(" "),4==t.params.status?s("span",[t._v("退款成功")]):t._e(),t._v(" "),5==t.params.status?s("span",[t._v("取消订单")]):t._e(),t._v(" "),6==t.params.status?s("span",[t._v("待点评")]):t._e(),t._v(" "),7==t.params.status?s("span",[t._v("待入住")]):t._e(),t._v(" "),8==t.params.status&&1==t.tabIndex?s("span",[t._v("入住中")]):t._e(),t._v(" "),8==t.params.status&&2==t.tabIndex?s("span",[t._v("待收货")]):t._e(),t._v(" "),9==t.params.status?s("span",[t._v("已完成")]):t._e(),t._v(" "),s("span",{staticClass:"arrow",class:t.isStateOpen?"arrow-down":""})]),t._v(" "),t.isStateOpen?s("ul",{staticClass:"states"},[s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(99)}}},[t._v("所有状态")]),t._v(" "),s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(0)}}},[t._v("待支付")]),t._v(" "),2==t.tabIndex?s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(1)}}},[t._v("待发货")]):t._e(),t._v(" "),1==t.tabIndex?s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(1)}}},[t._v("待确认")]):t._e(),t._v(" "),s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(2)}}},[t._v("申请退款")]),t._v(" "),s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(3)}}},[t._v("退款失败")]),t._v(" "),s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(4)}}},[t._v("退款成功")]),t._v(" "),s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(5)}}},[t._v("取消订单")]),t._v(" "),s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(6)}}},[t._v("待点评")]),t._v(" "),1==t.tabIndex?s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(7)}}},[t._v("待入住")]):t._e(),t._v(" "),1==t.tabIndex?s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(8)}}},[t._v("入住中")]):t._e(),t._v(" "),2==t.tabIndex?s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(8)}}},[t._v("待收货")]):t._e(),t._v(" "),s("li",{staticClass:"vux-1px-b",on:{click:function(a){return t.chooseStatus(9)}}},[t._v("已完成")])]):t._e()]),t._v(" "),s("div",{ref:"list_con",staticClass:"list_con"},[t.isStateOpen?s("div",{staticClass:"shadow"}):t._e(),t._v(" "),s("div",{ref:"wrapper",staticClass:"wrapper"},[s("div",{staticClass:"bscroll-container"},[s("div",{staticClass:"top-tip"},[s("span",{staticClass:"refresh-hook"},[t._v(t._s(t.pulldownMsg))])]),t._v(" "),s("ul",{ref:"content",staticClass:"content"},[t._l(t.data,function(a,e){return s("li",{staticClass:"item vux-1px-b"},[1==t.tabIndex?s("div",{staticClass:"hotel",on:{click:function(s){return t.goDetails({path:"orderHotel",id:a.orderId})}}},[s("div",{staticClass:"head vux-1px-b"},[s("span",{domProps:{textContent:t._s("订单编号："+a.orderId)}}),t._v(" "),0==a.status?s("span",[t._v("待支付")]):t._e(),t._v(" "),1==a.status?s("span",[t._v("待确认")]):t._e(),t._v(" "),2==a.status?s("span",[t._v("申请退款")]):t._e(),t._v(" "),3==a.status?s("span",[t._v("退款失败")]):t._e(),t._v(" "),4==a.status?s("span",[t._v("退款成功")]):t._e(),t._v(" "),5==a.status?s("span",[t._v("取消订单")]):t._e(),t._v(" "),6==a.status?s("span",[t._v("待点评")]):t._e(),t._v(" "),7==a.status?s("span",[t._v("待入住")]):t._e(),t._v(" "),8==a.status?s("span",[t._v("入住中")]):t._e(),t._v(" "),9==a.status?s("span",[t._v("已完成")]):t._e()]),t._v(" "),s("div",{staticClass:"info vux-1px-b"},[s("div",{staticClass:"name"},[s("span",{domProps:{textContent:t._s(a.customName)}}),t._v(" "),s("span",{domProps:{textContent:t._s(a.contactPhone)}})]),t._v(" "),s("div",{staticClass:"time"},[s("span",[t._v("入离时间：")]),t._v(" "),s("span",{domProps:{textContent:t._s(a.liveStartDate)}}),t._v(" "),s("span",[t._v(" 至 ")]),t._v(" "),s("span",{domProps:{textContent:t._s(a.liveEndDate)}})]),t._v(" "),s("div",{staticClass:"address"},[s("span",[t._v("预定房源：")]),t._v(" "),s("span",{domProps:{textContent:t._s(a.roomTitle)}})])]),t._v(" "),s("div",{staticClass:"botton"})]):t._e(),t._v(" "),2==t.tabIndex?s("div",{staticClass:"goods",on:{click:function(s){return t.goDetails({path:"orderedGoods",id:a.orderId})}}},[s("div",{staticClass:"head vux-1px-b"},[s("span",{domProps:{textContent:t._s("订单编号："+a.orderId)}}),t._v(" "),0==a.status?s("span",[t._v("待付款")]):t._e(),t._v(" "),1==a.status?s("span",[t._v("待发货")]):t._e(),t._v(" "),2==a.status?s("span",[t._v("申请退款")]):t._e(),t._v(" "),3==a.status?s("span",[t._v("退款失败")]):t._e(),t._v(" "),4==a.status?s("span",[t._v("退款成功")]):t._e(),t._v(" "),5==a.status?s("span",[t._v("取消订单")]):t._e(),t._v(" "),6==a.status?s("span",[t._v("待点评")]):t._e(),t._v(" "),8==a.status?s("span",[t._v("待收货")]):t._e(),t._v(" "),9==a.status?s("span",[t._v("已完成")]):t._e()]),t._v(" "),s("div",{staticClass:"goodsInfo vux-1px-b"},[s("div",{staticClass:"pics"},[s("img",{attrs:{src:a.imageUrl,alt:""}})]),t._v(" "),s("div",{staticClass:"infos"},[s("span",{domProps:{textContent:t._s(a.title)}}),t._v(" "),s("span",{domProps:{textContent:t._s("￥"+a.price)}})])]),t._v(" "),s("div",{staticClass:"botton"})]):t._e()])}),t._v(" "),t.isMoreData?t._e():s("div",{staticClass:"no_data"},[s("span"),t._v(" "),s("span",[t._v("暂无更多数据")]),t._v(" "),s("span")])],2),t._v(" "),t.isMoreData?s("div",{staticClass:"bottom-tip"},[s("span",{staticClass:"loading-hook"},[t._v(t._s(t.pullupMsg))])]):t._e()])]),t._v(" "),s("div",{staticClass:"alert-hook",style:{display:t.alertHook}},[t._v("刷新成功")])])])},staticRenderFns:[]};var d=s("VU/8")(r,c,!1,function(t){s("qmzg"),s("5s6Z")},"data-v-05bb5f72",null);a.default=d.exports},qmzg:function(t,a){}});
//# sourceMappingURL=28.af6e4cf9bae1386cb25d.js.map