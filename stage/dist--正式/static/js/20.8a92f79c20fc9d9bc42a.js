webpackJsonp([20],{"8dk6":function(t,s){},Fdzw:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("ALGc"),a=e("rHil"),o=e("Msp2"),n=e("pDNl"),c=(i.a,a.a,o.a,n.a,{name:"houseAdd",components:{XTextarea:i.a,Group:a.a,Actionsheet:o.a,XInput:n.a},data:function(){return{aa:"",value:"",baseInfo:{},isShow1:!1,menuList1:[],isShow2:!1,menuList2:[]}},created:function(){this.$vux.loading.show({text:"加载中..."}),this.getBaseInfo()},methods:{reduceBed:function(){this.baseInfo.bedNum<2||this.baseInfo.bedNum--},addBed:function(){this.baseInfo.bedNum++},check:function(t,s){(!t||t<0)&&(this.baseInfo[s]=0)},deleteSpecial:function(t){this.baseInfo.customProjectInfo.splice(t,1)},getEquipment:function(){var t=this;this.baseInfo&&this.baseInfo.stockQuantity>99999?this.$vux.toast.show({text:"存库不能大于五位数",position:"middle",type:"warn"}):this.baseInfo.completeArea&&this.baseInfo.completeArea>99999?this.$vux.toast.show({text:"整套面积不能大于五位数",position:"middle",type:"warn"}):(this.$vux.loading.show({text:"加载中..."}),this.$http.fetchPost("/merchant/room/add/baseInfo",this.baseInfo).then(function(s){t.$vux.loading.hide(),t.$router.replace({name:"houseEquipment",query:{params:{id:s.data.data.id}}})}))},reduce:function(t){if(1==t){if(0==this.baseInfo.apartmentInfo[0].room_quantity)return;this.baseInfo.apartmentInfo[0].room_quantity--}if(2==t){if(0==this.baseInfo.apartmentInfo[0].office_quantity)return;this.baseInfo.apartmentInfo[0].office_quantity--}if(3==t){if(0==this.baseInfo.apartmentInfo[0].kitchen_quantity)return;this.baseInfo.apartmentInfo[0].kitchen_quantity--}if(4==t){if(0==this.baseInfo.apartmentInfo[0].toilet_quantity)return;this.baseInfo.apartmentInfo[0].toilet_quantity--}},adder:function(t){1==t&&this.baseInfo.apartmentInfo[0].room_quantity++,2==t&&this.baseInfo.apartmentInfo[0].office_quantity++,3==t&&this.baseInfo.apartmentInfo[0].kitchen_quantity++,4==t&&this.baseInfo.apartmentInfo[0].toilet_quantity++},chooseToilet:function(t){t!=this.baseInfo.toiletStatus?this.baseInfo.toiletStatus=t:this.baseInfo.toiletStatus=0},chooseKitchen:function(t){t!=this.baseInfo.kitchenStatus?this.baseInfo.kitchenStatus=t:this.baseInfo.kitchenStatus=0},confirm1:function(t,s){s.isSelected=!0,this.baseInfo.roomTypeInfo=[s],this.baseInfo.roomTypeId=s.id,this.isShow1=!1},confirm2:function(t,s){s.isSelected=!0,this.baseInfo.bedModelInfo=[s],this.baseInfo.bedModelId=s.id,this.isShow1=!1},addSpecial:function(){var t=this;this.baseInfo&&this.baseInfo.stockQuantity>99999?this.$vux.toast.show({text:"存库不能大于五位数",position:"middle",type:"warn"}):this.baseInfo.completeArea&&this.baseInfo.completeArea>99999?this.$vux.toast.show({text:"整套面积不能大于五位数",position:"middle",type:"warn"}):(this.$vux.loading.show({text:"加载中..."}),this.$http.fetchPost("/merchant/room/add/baseInfo",this.baseInfo).then(function(s){t.$vux.loading.hide(),t.$router.replace({name:"addSpecial",query:{params:{postLongitude:t.baseInfo.longitude,postLatitude:t.baseInfo.latitude,id:s.data.data.id}}})}))},goNextStep:function(){var t=this;this.baseInfo.detailAddress&&this.baseInfo.houseNumber&&this.baseInfo.houseNumber?this.baseInfo.roomTypeInfo.length>0&&1==this.baseInfo.roomTypeInfo[0].isSelected?this.baseInfo.stockQuantity?this.baseInfo&&this.baseInfo.stockQuantity>99999?this.$vux.toast.show({text:"存库不能大于五位数",position:"middle",type:"warn"}):this.baseInfo.completeArea?this.baseInfo.completeArea&&this.baseInfo.completeArea>99999?this.$vux.toast.show({text:"整套面积不能大于五位数",position:"middle",type:"warn"}):this.baseInfo.bedNum>0?1==this.baseInfo.toiletStatus||2==this.baseInfo.toiletStatus||3==this.baseInfo.toiletStatus?1==this.baseInfo.kitchenStatus||2==this.baseInfo.kitchenStatus||3==this.baseInfo.kitchenStatus?(this.$vux.loading.show({text:"加载中..."}),this.$http.fetchPost("/merchant/room/add/baseInfo",this.baseInfo).then(function(s){t.$vux.loading.hide(),t.$router.replace({name:"secondStep",query:{params:{postLongitude:t.baseInfo.longitude,postLatitude:t.baseInfo.latitude,id:s.data.data.id}}})})):this.$vux.toast.show({text:"请完善厨房信息",position:"middle",type:"warn"}):this.$vux.toast.show({text:"请完善卫生间信息",position:"middle",type:"warn"}):this.$vux.toast.show({text:"请输入床位数量",position:"middle",type:"warn"}):this.$vux.toast.show({text:"请输入整套面积",position:"middle",type:"warn"}):this.$vux.toast.show({text:"请输入房源库存",position:"middle",type:"warn"}):this.$vux.toast.show({text:"请选择驿站类型",position:"middle",type:"warn"}):this.$vux.toast.show({text:"请输入房屋详细地址",position:"middle",type:"warn"})},getBack:function(){this.$router.go(-1)},chooseAddress:function(){var t=this;this.baseInfo&&this.baseInfo.stockQuantity>99999?this.$vux.toast.show({text:"存库不能大于五位数",position:"middle",type:"warn"}):this.baseInfo.completeArea&&this.baseInfo.completeArea>99999?this.$vux.toast.show({text:"整套面积不能大于五位数",position:"middle",type:"warn"}):(this.$vux.loading.show({text:"加载中..."}),this.$http.fetchPost("/merchant/room/add/baseInfo",this.baseInfo).then(function(s){t.$vux.loading.hide(),t.$router.replace({name:"houseMap",query:{params:{postLongitude:t.baseInfo.longitude,postLatitude:t.baseInfo.latitude,id:s.data.data.id}}})}))},getBaseInfo:function(){var t=this,s="";this.$route.query.params&&(s=this.$route.query.params.id||""),this.$http.fetchGet("/merchant/room/get/baseInfo",{roomId:s,merchantId:this.$store.state.merchantId}).then(function(s){setTimeout(function(){t.$vux.loading.hide()},500),t.baseInfo=s.data.data,t.baseInfo.merchantId=t.$store.state.merchantId,t.$route.query.params&&t.$route.query.params.postLocation&&(t.baseInfo.detailAddress=t.$route.query.params.postLocation,t.baseInfo.latitude=t.$route.query.params.postLatitude,t.baseInfo.longitude=t.$route.query.params.postLongitude),t.menuList1=s.data.data.roomTypeInfo,t.menuList1.map(function(s){s.label=s.name,s.isSelected&&(t.baseInfo.roomTypeInfo=[s],t.baseInfo.roomTypeId=s.id)}),t.menuList2=s.data.data.bedModelInfo,t.menuList2.map(function(s){s.label=s.name,s.isSelected&&(t.baseInfo.bedModelInfo=[s],t.baseInfo.bedModelId=s.id)});var e=[];t.baseInfo.facilitiesInfo.map(function(t){var s=!1,i=[];t.facilities.map(function(t){1==t.isSelected&&(s=!0,i.push(t))}),s&&(t.facilities=i,e.push(t))}),t.baseInfo.facilitiesInfo=e})}}}),u={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"houseAdd"},[e("div",{staticClass:"iosHeader vux-1px-b"},[e("span",[t._v("第一步：基础信息")]),t._v(" "),e("span",{staticClass:"right headericon icon iconfont",on:{click:t.getBack}},[t._v("")])]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"houseAdd_con"},[t._m(1),t._v(" "),e("div",{staticClass:"address"},[e("div",{staticClass:"tit"},[t._v("详细地址")]),t._v(" "),e("div",{staticClass:"addrIcon vux-1px-b",on:{click:t.chooseAddress}},[e("span",{domProps:{textContent:t._s(t.baseInfo.detailAddress)}}),t._v(" "),e("span",{staticClass:"icon iconfont"},[t._v("")])]),t._v(" "),e("div",{staticClass:"tit"},[t._v("楼、单元、门牌号")]),t._v(" "),e("div",{staticClass:"addrIcon houseAddAttrArea vux-1px-b"},[e("group",[e("x-textarea",{attrs:{placeholder:"请填写您的门牌号，此信息只对预定的客人展示","show-counter":!0,max:20},model:{value:t.baseInfo.houseNumber,callback:function(s){t.$set(t.baseInfo,"houseNumber",s)},expression:"baseInfo.houseNumber"}})],1)],1)]),t._v(" "),e("div",{staticClass:"defaultTitle"},[t._v("房型信息")]),t._v(" "),e("div",{staticClass:"defaultLine"},[e("div",{staticClass:"deraultLine_con vux-1px-b",on:{click:function(s){t.isShow1=!0}}},[e("span",[t._v("驿站类型")]),t._v(" "),e("div",{staticClass:"info"},[e("span",{domProps:{textContent:t._s(t.baseInfo.roomTypeInfo[0].isSelected?t.baseInfo.roomTypeInfo[0].name:"请选择")}}),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-right",attrs:{type:"ios-arrow-right",size:"40",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 512 512"}},[e("path",{attrs:{d:"M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"}})])])])]),t._v(" "),t._m(2),t._v(" "),e("div",{staticClass:"addLine vux-1px-b"},[e("div",{staticClass:"childLine"},[e("div",{staticClass:"nums"},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-minus",attrs:{type:"ios-minus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:function(s){return t.reduce(1)}}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H128v-17h256v17z"}})]),t._v(" "),e("span",{staticClass:"persons",domProps:{textContent:t._s(t.baseInfo.apartmentInfo[0].room_quantity)}}),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus",attrs:{type:"ios-plus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:function(s){return t.adder(1)}}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])]),t._v(" "),e("div",{staticClass:"types"},[t._v("室")])]),t._v(" "),e("div",{staticClass:"childLine"},[e("div",{staticClass:"nums"},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-minus",attrs:{type:"ios-minus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:function(s){return t.reduce(2)}}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H128v-17h256v17z"}})]),t._v(" "),e("span",{staticClass:"persons",domProps:{textContent:t._s(t.baseInfo.apartmentInfo[0].office_quantity)}}),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus",attrs:{type:"ios-plus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:function(s){return t.adder(2)}}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])]),t._v(" "),e("div",{staticClass:"types"},[t._v("厅")])]),t._v(" "),e("div",{staticClass:"childLine"},[e("div",{staticClass:"nums"},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-minus",attrs:{type:"ios-minus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:function(s){return t.reduce(3)}}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H128v-17h256v17z"}})]),t._v(" "),e("span",{staticClass:"persons",domProps:{textContent:t._s(t.baseInfo.apartmentInfo[0].kitchen_quantity)}}),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus",attrs:{type:"ios-plus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:function(s){return t.adder(3)}}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])]),t._v(" "),e("div",{staticClass:"types"},[t._v("厨")])]),t._v(" "),e("div",{staticClass:"childLine"},[e("div",{staticClass:"nums"},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-minus",attrs:{type:"ios-minus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:function(s){return t.reduce(4)}}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H128v-17h256v17z"}})]),t._v(" "),e("span",{staticClass:"persons",domProps:{textContent:t._s(t.baseInfo.apartmentInfo[0].toilet_quantity)}}),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus",attrs:{type:"ios-plus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:function(s){return t.adder(4)}}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])]),t._v(" "),e("div",{staticClass:"types"},[t._v("卫")])])]),t._v(" "),e("div",{staticClass:"defaultLine vux-1px-b"},[e("div",{staticClass:"deraultLine_con"},[e("span",[t._v("房源库存")]),t._v(" "),e("div",{staticClass:"info"},[e("x-input",{attrs:{"show-clear":!1,type:"number",placeholder:"请输入房源库存"},on:{"on-blur":function(s){return t.check(t.baseInfo.stockQuantity,"stockQuantity")}},model:{value:t.baseInfo.stockQuantity,callback:function(s){t.$set(t.baseInfo,"stockQuantity",s)},expression:"baseInfo.stockQuantity"}})],1)])]),t._v(" "),e("div",{staticClass:"defaultLine vux-1px-b"},[e("div",{staticClass:"deraultLine_con"},[e("span",[t._v("整套面积（㎡）")]),t._v(" "),e("div",{staticClass:"info"},[e("x-input",{attrs:{"show-clear":!1,type:"number",placeholder:"请输入整套面积"},on:{"on-blur":function(s){return t.check(t.baseInfo.completeArea,"completeArea")}},model:{value:t.baseInfo.completeArea,callback:function(s){t.$set(t.baseInfo,"completeArea",s)},expression:"baseInfo.completeArea"}})],1)])]),t._v(" "),e("div",{staticClass:"defaultLine vux-1px-b"},[e("div",{staticClass:"deraultLine_con",on:{click:t.getEquipment}},[e("span",[t._v("房间设施")]),t._v(" "),e("div",{staticClass:"info"},[e("span",[t._v("请选择")]),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-right",attrs:{type:"ios-arrow-right",size:"40",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 512 512"}},[e("path",{attrs:{d:"M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"}})])])])]),t._v(" "),e("div",{staticClass:"defaultLine vux-1px-b"},[e("div",{staticClass:"deraultLine_con",on:{click:function(s){t.isShow2=!0}}},[e("span",[t._v("床型")]),t._v(" "),e("div",{staticClass:"info"},[e("span",{domProps:{textContent:t._s(t.baseInfo.bedModelInfo[0].isSelected?t.baseInfo.bedModelInfo[0].name:"请选择")}},[t._v("请选择")]),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-right",attrs:{type:"ios-arrow-right",size:"40",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 512 512"}},[e("path",{attrs:{d:"M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"}})])])])]),t._v(" "),e("div",{staticClass:"defaultLine vux-1px-b"},[e("div",{staticClass:"deraultLine_con"},[e("span",[t._v("床位数量")]),t._v(" "),e("div",{staticClass:"nums"},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-minus",attrs:{type:"ios-minus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.reduceBed}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H128v-17h256v17z"}})]),t._v(" "),e("span",{staticClass:"persons",domProps:{textContent:t._s(t.baseInfo.bedNum)}}),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-plus",attrs:{type:"ios-plus",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.addBed}},[e("path",{attrs:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm128 217H264v119h-17V265H128v-17h119V128h17v120h120v17z"}})])])])]),t._v(" "),e("div",{staticClass:"selectLine vux-1px-b"},[e("div",{staticClass:"selectLineCon"},[e("span",[t._v("卫生间")]),t._v(" "),e("div",{staticClass:"info"},[e("span",{class:{active:1==t.baseInfo.toiletStatus},on:{click:function(s){return t.chooseToilet(1)}}},[t._v("独卫")]),t._v(" "),e("span",{class:{active:2==t.baseInfo.toiletStatus},on:{click:function(s){return t.chooseToilet(2)}}},[t._v("公共")]),t._v(" "),e("span",{class:{active:3==t.baseInfo.toiletStatus},on:{click:function(s){return t.chooseToilet(3)}}},[t._v("独卫+公共")])])])]),t._v(" "),e("div",{staticClass:"selectLine"},[e("div",{staticClass:"selectLineCon"},[e("span",[t._v("厨房")]),t._v(" "),e("div",{staticClass:"info"},[e("span",{class:{active:1==t.baseInfo.kitchenStatus},on:{click:function(s){return t.chooseKitchen(1)}}},[t._v("燃气灶")]),t._v(" "),e("span",{class:{active:2==t.baseInfo.kitchenStatus},on:{click:function(s){return t.chooseKitchen(2)}}},[t._v("电磁炉")]),t._v(" "),e("span",{class:{active:3==t.baseInfo.kitchenStatus},on:{click:function(s){return t.chooseKitchen(3)}}},[t._v("燃气灶+电磁炉")])])])]),t._v(" "),t._m(3),t._v(" "),t._l(t.baseInfo.customProjectInfo,function(s,i){return e("div",{staticClass:"special"},[e("div",{staticClass:"special_con"},[e("div",{staticClass:"image"},[e("img",{attrs:{src:s.image_path,alt:""}})]),t._v(" "),e("div",{staticClass:"info"},[e("span",{domProps:{textContent:t._s(s.title)}}),t._v(" "),e("span",{domProps:{textContent:t._s("¥"+s.price)}})]),t._v(" "),e("span",{staticClass:"deleteBtn icon iconfont",on:{click:function(s){return t.deleteSpecial(i)}}},[t._v("")])])])}),t._v(" "),e("div",{staticClass:"special_add",on:{click:t.addSpecial}},[e("span",{staticClass:"icon iconfont"},[t._v("")]),t._v(" "),e("span",[t._v("添加")])]),t._v(" "),e("div",{staticClass:"bottom",on:{click:t.goNextStep}},[t._v("下一步")])],2),t._v(" "),e("actionsheet",{staticClass:"myActionsheet",attrs:{menus:t.menuList1,"close-on-clicking-mask":!1,"show-cancel":""},on:{"on-click-menu":t.confirm1,"on-click-mask":function(s){t.isShow1=!1}},model:{value:t.isShow1,callback:function(s){t.isShow1=s},expression:"isShow1"}}),t._v(" "),e("actionsheet",{staticClass:"myActionsheet",attrs:{menus:t.menuList2,"close-on-clicking-mask":!1,"show-cancel":""},on:{"on-click-menu":t.confirm2,"on-click-mask":function(s){t.isShow2=!1}},model:{value:t.isShow2,callback:function(s){t.isShow2=s},expression:"isShow2"}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"steps"},[s("span")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"houseAddressTitle"},[s("span",[this._v("房屋位置")]),this._v(" "),s("span",[this._v("请放心，为了保护您的隐私，在客人预定之前，我们不会展示您的门牌号码。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"defaultLine"},[s("div",{staticClass:"deraultLine_con vux-1px-b"},[s("span",[this._v("整套户型")]),this._v(" "),s("div",{staticClass:"info"})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"houseAddressTitle",staticStyle:{background:"#fff"}},[s("span",[this._v("定制项目")]),this._v(" "),s("span",[this._v("可添加一些付费定制项目（如枕头、鲜花等），供客人下单时自助选择。定制的价格最终会加到房间的房费中。")])])}]};var r=e("VU/8")(c,u,!1,function(t){e("8dk6"),e("nBNe")},"data-v-557aa2ef",null);s.default=r.exports},nBNe:function(t,s){}});
//# sourceMappingURL=20.8a92f79c20fc9d9bc42a.js.map